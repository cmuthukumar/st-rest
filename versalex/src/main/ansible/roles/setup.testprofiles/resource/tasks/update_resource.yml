---
# tasks file for setup.testprofiles
- block:
   - name: Setting Dictionary Name for Versalex Instances
     set_fact:
        update_resouce: "{{update_item.value}}"
        
   - name: "Update IP Address(Local Listener/AS2) for Versalex Instances"
     shell: "./{{update_resouce.dname}} -m -p 'Local Listener/AS2' -t '<Service><Hostname>{{ansible_ssh_host}}' "
     args:
       chdir: "{{ update_resouce.install_location }}"
     register: update_ip       
     retries: 3
     delay: 2
     until: update_ip|success
     ignore_errors: yes
- rescue:
   - fail: msg="Setup Test Profile Module Failed" 
